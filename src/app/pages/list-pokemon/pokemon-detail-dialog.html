<p-dialog
  [visible]="visible"
  (visibleChange)="onVisibleChange($event)"
  [modal]="true"
  [style]="{ width: '50vw' }"
  [draggable]="false"
  [resizable]="true"
  header="Chi tiết Pokemon"
  [closable]="true"
>
  <ng-container *ngIf="pokemon">
    <div class="pokemon-detail-container">
      <!-- Header với tên và ID -->
      <div class="pokemon-header mb-4">
        <h2 class="text-3xl font-bold capitalize mb-2">{{ pokemon.name }}</h2>
        <p class="text-gray-600">ID: #{{ pokemon.id }}</p>
      </div>

      <!-- Sprites Gallery -->
      <div class="pokemon-sprites mb-6">
        <h3 class="text-xl font-semibold mb-3">Sprites</h3>
        <div class="grid grid-cols-2 gap-4">
          <div class="sprite-item">
            <label class="text-sm font-medium text-gray-700 mb-1 block">Front Default</label>
            <img
              [src]="pokemon.sprites.front_default ?? ''"
              [alt]="pokemon.name + ' front default'"
              class="w-full rounded border"
            />
          </div>
          <div class="sprite-item">
            <label class="text-sm font-medium text-gray-700 mb-1 block">Front Shiny</label>
            <img
              [src]="pokemon.sprites.front_shiny ?? ''"
              [alt]="pokemon.name + ' front shiny'"
              class="w-full rounded border"
            />
          </div>
          <div class="sprite-item">
            <label class="text-sm font-medium text-gray-700 mb-1 block">Back Default</label>
            <img
              [src]="pokemon.sprites.back_default ?? ''"
              [alt]="pokemon.name + ' back default'"
              class="w-full rounded border"
            />
          </div>
          <div class="sprite-item">
            <label class="text-sm font-medium text-gray-700 mb-1 block">Back Shiny</label>
            <img
              [src]="pokemon.sprites.back_shiny ?? ''"
              [alt]="pokemon.name + ' back shiny'"
              class="w-full rounded border"
            />
          </div>
        </div>
      </div>

      <!-- Types -->
      <div class="pokemon-types mb-4">
        <h3 class="text-xl font-semibold mb-2">Types</h3>
        <div class="flex gap-2">
          <span
            *ngFor="let type of pokemonTypes"
            class="px-3 py-1 rounded-full bg-blue-100 text-blue-800 capitalize text-sm font-medium"
          >
            {{ type }}
          </span>
        </div>
      </div>

      <!-- Abilities -->
      <div class="pokemon-abilities mb-4">
        <h3 class="text-xl font-semibold mb-2">Abilities</h3>
        <div class="flex flex-wrap gap-2">
          <span
            *ngFor="let ability of pokemonAbilities"
            class="px-3 py-1 rounded-full bg-green-100 text-green-800 capitalize text-sm"
          >
            {{ ability }}
          </span>
        </div>
      </div>

      <!-- Stats -->
      <div class="pokemon-stats mb-4">
        <h3 class="text-xl font-semibold mb-3">Base Stats</h3>
        <div class="space-y-2">
          <div *ngFor="let stat of pokemonStats" class="stat-item">
            <div class="flex justify-between items-center mb-1">
              <span class="text-sm font-medium text-gray-700 capitalize">{{ stat.name }}</span>
              <span class="text-sm font-bold">{{ stat.value }}</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
              <div
                class="bg-blue-600 h-2 rounded-full"
                [style.width.%]="(stat.value / 255) * 100"
              ></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Physical Attributes -->
      <div class="pokemon-physical grid grid-cols-2 gap-4">
        <div>
          <h3 class="text-xl font-semibold mb-2">Height</h3>
          <p class="text-lg">{{ pokemon.height / 10 }} m</p>
        </div>
        <div>
          <h3 class="text-xl font-semibold mb-2">Weight</h3>
          <p class="text-lg">{{ pokemon.weight / 10 }} kg</p>
        </div>
      </div>
    </div>
  </ng-container>
</p-dialog>
