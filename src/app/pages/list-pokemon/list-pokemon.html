<p-table
  #pokemonTable
  [value]="getPokemon()"
  [rowTrackBy]="trackByFn"
  [paginator]="true"
  [rows]="rows"
  [first]="first"
  [rowsPerPageOptions]="rowsPerPageOptions"
  [showCurrentPageReport]="true"
  currentPageReportTemplate="Hiển thị {first} đến {last} trong tổng số {totalRecords} mục"
  (onPage)="onPageChange($event)"
  paginatorTemplate="FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown"
  styleClass="p-datatable-striped"
>
  <!-- [virtualScroll]="true"
  [virtualScrollItemSize]="60"
  [scrollHeight]="'600px'" -->

  <ng-template #header>
    <tr>
      <th>Name</th>
      <th>Front Image</th>
      <th>Front Shiny</th>
      <th>Back Default</th>
      <th>Back Shiny</th>
      <th>Back Shiny Female</th>
    </tr>
  </ng-template>
  <ng-template #body let-item>
    <tr (click)="onRowClick(item)" class="cursor-pointer hover:bg-gray-100">
      <td>{{ item.name }}</td>
      <td>
        <img
          [src]="item.sprites.front_default ?? ''"
          [alt]="item.sprites.front_default ?? ''"
          front_shiny
          class="w-24 rounded"
        />
      </td>
      <td>
        <img
          [src]="item.sprites.front_shiny ?? ''"
          [alt]="item.sprites.front_shiny ?? ''"
          class="w-24 rounded"
        />
      </td>
      <td>
        <img
          [src]="item.sprites.back_default ?? ''"
          [alt]="item.sprites.back_default ?? ''"
          class="w-24 rounded"
        />
      </td>
      <td>
        <img
          [src]="item.sprites.back_shiny ?? ''"
          [alt]="item.sprites.back_shiny ?? ''"
          class="w-24 rounded"
        />
      </td>
      <td>
        <img
          [src]="item.sprites.back_shiny_female ?? ''"
          [alt]="item.sprites.back_shiny_female ?? ''"
          class="w-24 rounded"
        />
      </td>
    </tr>
  </ng-template>
</p-table>

@defer (on hover(pokemonTable); on interaction(pokemonTable)) {
  <app-pokemon-detail-dialog
    [pokemon]="selectedPokemon()"
    [visible]="dialogVisible()"
    (visibleChange)="dialogVisible.set($event)"
  ></app-pokemon-detail-dialog>
} @placeholder {
  <!-- Dialog will be loaded on hover or interaction with table -->
}
